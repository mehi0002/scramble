<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Welcome to Scramble.</title>
  <link rel="stylesheet" href="style.css">
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"
  >
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body>
  <div id="root" class="container"></div>
  <script type="text/babel" src="app.js"></script>
  
  <script type="text/babel">
    const root = ReactDOM.createRoot(document.getElementById('root'));
    
    function Stats(props){
      return(
        <table>
          <thead>
            <tr>
              <th>Score</th>
              <th>Strikes </th>
              <th>Passes </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{props.score}</td>
              <td>{props.strikes}</td>
              <td>{props.passes}</td>
            </tr>
          </tbody>
        </table>
      );
    }

    function WordDisplay(props){
      return(
       <p> {props.word} </p>
      );
    }

    function Guess(props){
      return(
        <input type="text" value={props.guess} onChange={props.onGuessUpdate}></input>
      );
    }

    function PassButton(props){

      function passButtonHandler(e){
        e.preventDefault();
        console.log(`Pass Button - ${props.passes}`);
        props.passes >= 1 && props.updatePasses(props.passes - 1);
      }

      return(
        props.passes >= 1 ?
          <button onClick={passButtonHandler}>Pass</button> :
          <button disabled={true}>Pass</button>
      );
    }

    function App(){
      const wordList = [
        'treatment', 
        'abundant', 
        'mainstream', 
        'productive',
        'incentive',
        'sensitivity',
        'farewell',
        'fastidious',
        'classify',
        'history'
      ];
      const shuffledWordList = shuffle(wordList);
      const word = shuffledWordList.pop();
      const scrambledWord = shuffle(word);

      // *** Stats ***
      const score = 0;
      const strikes = 3;

      // *** States ***
      const [guess, setGuess] = React.useState('');
      const [passes, setPasses] = React.useState(5);

      // *** Handlers ***     
      function updateGuessHandler(e){
        setGuess(e.target.value);
      }

      function submitGuessHandler(guess, answer){

      }

      function updatePassesHandler(passes){
        console.log(`Updating Passes - ${passes}`);
        passes >= 0 && setPasses(passes);
      }

      // *** Testing ***
      console.log(wordList);
      console.log(shuffledWordList);
      console.log(`Scramble: ${scrambledWord}`);
      console.log(`Answer: ${word}`);
      console.log(`Guess: ${guess}`);
      console.log(`Passes: ${passes}`);

      return(
        <>
          <h1>Scramble</h1>
          <Stats score={score} strikes={strikes} passes={passes} />
          <WordDisplay word={scrambledWord}/>
          <form>
            <Guess guess={guess} onGuessUpdate={updateGuessHandler} />
            <PassButton passes={passes} updatePasses={updatePassesHandler}/>
          </form>
        </>
      );
    }

    root.render(
      <App />
    );

  </script>
</body>

</html>